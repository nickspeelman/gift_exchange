<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Gift Exchange – Player</title>
  <link rel="stylesheet" href="../shared/css/main.css">
</head>
<body>
  <h1>Gift Exchange – Player</h1>

  <section class="card">
    <h2>Connection</h2>

    <div class="row" style="align-items:center;">
      <span id="liveDot" class="dot" aria-hidden="true"></span>
      <strong id="liveText">Live</strong>
      <span id="liveDetail" class="muted">Idle</span>
    </div>

    <div id="sessionInfo"></div>
    <div><strong>Status:</strong> <span id="sessionStatus">(loading...)</span></div>
    <div id="statusMessage" style="margin-top: 0.5rem;"></div>
  </section>

  <!-- NEW: Join / Waiting card -->
  <section class="card" style="margin-top: 1rem;">
    <h2>Join</h2>

    <!-- Join form -->
    <div id="joinPanel" style="display:none;">
      <form id="joinForm">
          <div class="row" style="gap: .5rem; align-items: center;">
          <input id="playerNameInput"
                 name="playerName"
                 type="text"
                 placeholder="Your Name (e.g. Buffy Summers)"
                 maxlength="40"
                 autocomplete="name"
                 style="flex: 1;" />
            <input
                id="playerPronouns"
                type="text"
                placeholder="Your pronouns (e.g., she/her, he/him, they/them)"
                autocomplete="off"
                />

          <button id="joinButton" type="submit">Join</button>
        </div>
      </form>

      <div id="joinError" class="result" style="display:none; margin-top:.5rem;" aria-live="polite"></div>
    </div>

    <!-- Waiting state -->
    <div id="waitingPanel" style="display:none;">
      <div class="muted">You’re in. Waiting for the host to start the game…</div>
      <div style="margin-top:.5rem;"><strong id="youAreLabel"></strong></div>
    </div>
  </section>

  <section class="card" style="margin-top: 1rem;">
    <h2>Public message</h2>
    <div id="publicMessage" class="result muted" aria-live="polite">
      Waiting for game updates…
    </div>
  </section>

  <script src="../shared/js/dom.js"></script>
  <script src="../shared/js/storage.js"></script>
  <script type="module" src="js/app.js"></script>
</body>
</html>
